//                 ....
//             ....      ..
//          ...           .
//        ..        .......
//     ...          .......
//   ...          .. .......
//  ..          ..     .......
// ..          ..        ......
// ..         ..          .......
// ..        ..            .... ..
//  .........                .......
//                            ... ...
//                              ......
//                               .......
//                                 ......
//                                  ......
//                                   .......
//                                     ......
//                                      .......
//                                       .......
//                                         ......                 ......
//                                          .......           ........ ..
//                                            ......      ........ ........
//                                             ....... ............ ........
//                                              .............................
//                                              ...................... ........
//                                           ...................................
//                                       ................................ .......
//                                    ............................................
//                                   ............................................
//                                 ............................................
//                                 ..........................................
//                                  ......................................
//                                   ..................................
//                                     .............................
//                                      .........................
//                                        .........................
//                                   ................................
//                                   ..............................
//                                      ....................
#include<bits/stdc++.h>
using namespace std;
#define int long long
#define io ios_base::sync_with_stdio(false);cin.tie(NULL);cout.tie(NULL)
#define mod 1000000007
int32_t main(){
    io;
    int t=1;
    //cin>>t;
    while(t--){
       int n,q,k;
       cin>>n>>q>>k;
       vector<int>v(n);
       for(int i=0;i<n;i++)
       cin>>v[i];
       vector<pair<int,int>>query(q);
       for(int i=0;i<q;i++){
           cin>>query[i].first;
           cin>>query[i].second;
           query[i].first--;
           query[i].second--;
       }
       vector<int>prefix(n,0);
       for(int i=1;i<n-1;i++){
           prefix[i]=v[i+1]-v[i-1]-2;
           prefix[i]+=prefix[i-1];
       }
       for(int i=0;i<q;i++){
           int l=query[i].first;
           int r=query[i].second;
           if(l==r)
           cout<<k-1<<endl;
           else if(r==l+1){
               cout<<v[r]-3+(k-v[l])<<endl;
           }
           else{
               cout<<(prefix[r-1]-prefix[l])+(v[l+1]-2+k-v[r-1]-1)<<endl;
           }
       }
       
        
    }
      
}